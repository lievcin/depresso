<h1 class="title is-3 has-text-white">Rate my anxiety/depression</h1>

<br>
<div class="columns">
	<div class="column is-two-thirds">

		<%= form_for(@mood) do |f| %>
		  <% if @mood.errors.any? %>
		  <div id="errorExplanation">
		    <h2><%= pluralize(@mood.errors.count, "error") %> prohibited
		        this mood from being saved:</h2>
		    <ul>
		    <% @mood.errors.full_messages.each do |msg| %>
		      <li><%= msg %></li>
		    <% end %>
		    </ul>
		  </div>
		  <% end %>

		  <div class="field is-horizontal">
		    <div class="field-label is-normal">
		      <label class="label has-text-white">Score</label>
		    </div>
		    <div class="field-body">
		      <div class="select">
		      	<%= f.select :score, options_for_select((1..10).to_a) %>
		      </div>
		    </div>
		  </div>

		  <div class="field is-horizontal">
		    <div class="field-label is-normal">
		      <label class="label has-text-white">Notes</label>
		    </div>
		    <div class="field-body">
		    	<div class="control">
		      	<%= f.text_area :notes, rows: 3, columns: 10, class: 'textarea is-medium' %>
		      </div>
		    </div>
		  </div>

		  <div class="field is-horizontal">
		    <div class="field-label is-normal">
		      <label class="label"></label>
		    </div>
		    <div class="field-body">
		      <div class="actions">
		        <%= f.submit 'Save', class: 'button is-primary' %>
		      </div>
		    </div>
		  </div>

		<% end %>

	</div>
	<div class="column is-one-third">
		<blockquote>
			<h3>
				<%= @quote %>
			</h3>
		</blockquote>
	</div>

</div>



<br>

<h1 class="title is-3 has-text-white">How has my mood changed over time?</h1>

<%= area_chart Mood.group_by_day(:created_at).average(:score),
							 library: { chart: { backgroundColor: nil },
													yAxis: { gridLineColor: nil,
																	 labels: {
																	 		style: {
																	 			color: 'white'
																	 		}
																	 	}
																	},
													xAxis: { gridLineColor: nil,
																	 labels: {
																	 		style: {
																	 			color: 'white'
																	 		}
																	 	}
																	},
													plotOptions: {
														series: {
															color: '#540D6E'
														}
													}
												}
%>